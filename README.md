# Spring Security + JWT (Token-Based Authentication)

Простой, но функциональный сервис авторизации на Spring Boot с использованием **JWT (JSON Web Token)** и **Spring Security**.  
Проект реализует **token-based подход** с поддержкой **refresh-токенов**, **ограниченным временем жизни токенов** и возможностью **отзыва доступа**.

---

## Функционал

Сервис позволяет:
- Регистрировать новых пользователей
- Авторизовываться существующим пользователям
- Получать JWT-токены (`access` и `refresh`)
- Обновлять `access token` без повторного ввода логина и пароля
- Защищать эндпоинты по ролям
- Выводить информацию о текущем пользователе
- Отзывать токен (на уровне клиента)

---

## Роли пользователей

В системе реализованы 3 роли:
- `ADMIN`
- `PREMIUM_USER`
- `GUEST`

---

## Информация о пользователе

При регистрации и авторизации хранятся:
- **Идентификатор** (`id`)
- **Логин** (уникальный)
- **Пароль** (хэшируется с помощью `BCrypt`)
- **Email** (уникальный)
- **Набор ролей**

---

## Token-Based Авторизация

- Используется **JWT (JSON Web Token)** для stateless-аутентификации
- `access token`: живёт **15 минут** (можно изменить)
- `refresh token`: живёт **7 дней** — позволяет получать новый `access token` без ввода пароля
- Реализован механизм **отзыва токена** — клиент самостоятельно удаляет токены при выходе

---

## Технологии

- **Java 17**
- **Spring Boot 3.x**
- **Spring Security** — защита и аутентификация
- **JWT (io.jsonwebtoken)** — генерация и валидация токенов
- **Spring Data JPA** — работа с базой данных
- **H2 / PostgreSQL** — база данных (на выбор)
- **Flyway** — управление миграциями
- **Lombok** — уменьшение boilerplate-кода
- **Maven** — сборка проекта

---

## Запуск проекта

### 1. Клонируй репозиторий
```bash
git clone https://github.com/dmitriina1/SpringSecurityJWT.git
cd SpringSecurityJWT
```

### 2. Должен быть установлен Java 17 и Maven

### 3. Запусти приложение
```
./mvnw spring-boot:run
```

Приложение запустится на:
http://localhost:8189

## API эндпоинты

POST
- /auth - Вход: возвращает accessToken и refreshToken
- /registration - Регистрация нового пользователя
- /refresh - Обновление accessToken по refreshToken

GET
- /info - Получение информации о текущем пользователе 

## Дополнительная информация

- Пароли хранятся в хэшированном виде (BCrypt)
- access token имеет короткое время жизни
- refresh token позволяет избежать повторного ввода пароля
- При выходе клиент удаляет токены — это считается их отменой
- Все эндпоинты защищены через JwtRequestFilter
